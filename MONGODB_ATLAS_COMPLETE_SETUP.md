# üóÑÔ∏è MongoDB Atlas Complete Setup Guide
## Copy-Paste Instructions (5-10 minutes)

**You created a MongoDB Atlas account ‚úÖ**

Now follow these exact steps - I've prepared everything for you!

---

## STEP 1: Create Free Cluster (2 minutes)

### 1.1 Start Cluster Creation
1. Log in to: **https://cloud.mongodb.com**
2. You should see a "Create" button or "Build a Database" button
3. Click **"Build a Database"** or **"Create"**

### 1.2 Choose Free Tier
- Select: **M0 FREE** (not M10 or M2)
- Provider: **AWS** (recommended) or Google Cloud/Azure
- Region: Choose closest to you (e.g., **us-east-1** if in USA)
- Cluster Name: Keep default or name it: `reveal-cluster`
- Click **"Create Cluster"** (or "Create Deployment")

**‚è±Ô∏è Wait 3-5 minutes for cluster to be created...**

---

## STEP 2: Create Database User (1 minute)

### 2.1 Security Quickstart (if it appears)
After cluster is created, you may see a "Security Quickstart" popup:

**If you see the popup:**
1. **Username**: Enter `reveal_user`
2. **Password**: Click **"Autogenerate Secure Password"**
3. **‚ö†Ô∏è CRITICAL**: Click the **COPY** button to copy the password
4. **‚ö†Ô∏è SAVE THIS PASSWORD** somewhere (you'll need it in 2 minutes!)
5. Click **"Create User"**

**If no popup appears:**
1. Click **"Database Access"** in left sidebar (under Security)
2. Click **"Add New Database User"**
3. **Authentication Method**: Password
4. **Username**: `reveal_user`
5. **Password**: Click **"Autogenerate Secure Password"** ‚Üí **COPY IT** ‚Üí **SAVE IT**
6. **Database User Privileges**: Choose **"Read and write to any database"**
7. Click **"Add User"**

**‚úÖ You should now have:**
- Username: `reveal_user`
- Password: (the autogenerated password you saved)

---

## STEP 3: Configure Network Access (1 minute)

### 3.1 Allow Access from Anywhere

**If you see "Network Access" in the Security Quickstart popup:**
1. Select **"Allow access from anywhere"** (or "My Current IP Address" option)
2. Click **"Add Entry"** or **"Finish and Close"**

**If no popup, or to configure manually:**
1. Click **"Network Access"** in left sidebar (under Security)
2. Click **"Add IP Address"**
3. Click **"Allow Access from Anywhere"** button
   - This will automatically fill: `0.0.0.0/0`
4. Comment (optional): `Render Backend`
5. Click **"Confirm"**

**Why this is safe:** Your database is protected by username/password. This just allows Render's servers to connect.

---

## STEP 4: Get Connection String (2 minutes)

### 4.1 Navigate to Cluster
1. Click **"Database"** in the left sidebar (icon looks like a database cylinder)
2. You should see your cluster (e.g., `reveal-cluster` or `Cluster0`)
3. Click the **"Connect"** button on your cluster

### 4.2 Choose Connection Method
1. Select **"Connect your application"**
   - (NOT "MongoDB Compass" or "MongoDB Shell")

### 4.3 Copy Connection String
1. **Driver**: Select **"Python"**
2. **Version**: Select **"3.12 or later"** (or latest version shown)
3. You'll see a connection string that looks like:
   ```
   mongodb+srv://reveal_user:<password>@cluster0.xxxxx.mongodb.net/?retryWrites=true&w=majority
   ```
4. Click **"Copy"** button to copy this string

### 4.4 Customize Connection String

**IMPORTANT**: You need to modify this string in 2 places:

**Original:**
```
mongodb+srv://reveal_user:<password>@cluster0.xxxxx.mongodb.net/?retryWrites=true&w=majority
```

**Changes to make:**
1. Replace `<password>` with the actual password you saved earlier
2. Add `/app_database` after `.net/` and before the `?`

**Final format should look like:**
```
mongodb+srv://reveal_user:YOUR_ACTUAL_PASSWORD@cluster0.xxxxx.mongodb.net/app_database?retryWrites=true&w=majority
```

**Example (with fake password):**
```
mongodb+srv://reveal_user:Abc123XyZ789@cluster0.abc12.mongodb.net/app_database?retryWrites=true&w=majority
```

**‚úÖ Save this complete connection string - you'll paste it into Render next!**

---

## STEP 5: Add Connection String to Render (2 minutes)

### 5.1 Go to Render Dashboard
1. Go to: **https://dashboard.render.com**
2. Find your service: **cinescan-backend**
3. Click on it to open the service

### 5.2 Add Environment Variable
1. Click **"Environment"** in the left sidebar
2. Click **"Add Environment Variable"** button

### 5.3 Add MONGO_URL
1. **Key**: Type exactly: `MONGO_URL`
2. **Value**: Paste your complete MongoDB connection string from Step 4.4
   - Should start with: `mongodb+srv://reveal_user:...`
   - Should include: `/app_database?`
3. Click **"Add"** or **"Save Changes"**

### 5.4 Add Other Required Variables (if not already there)

**Check if these exist. If missing, add each one:**

#### TMDB_API_KEY
- **Key**: `TMDB_API_KEY`
- **Value**: `04253a70fe55d02b56ecc5f48e52b255`

#### AUDD_API_KEY
- **Key**: `AUDD_API_KEY`
- **Value**: `e8a4e451c1f0bb0e7b86f7a4c6f2bd62`

#### OPENAI_API_KEY
- **Key**: `OPENAI_API_KEY`
- **Value**: `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`

#### GOOGLE_VISION_API_KEY
- **Key**: `GOOGLE_VISION_API_KEY`
- **Value**: `AIzaSyCmJcZA12j9wOIc2gDf0T-StZ2OQ3BHObA`

### 5.5 Save All Changes
1. After adding all variables, click **"Save Changes"** (if not auto-saved)
2. Render will automatically restart your service
3. **‚è±Ô∏è Wait 2-3 minutes** for restart

---

## STEP 6: Verify Deployment (1 minute)

### 6.1 Check Service Status
1. Stay on Render Dashboard ‚Üí Your service
2. Look at the status indicator (top of page)
3. Wait until it shows: **üü¢ "Live"** (green badge)

### 6.2 Check Logs
1. Click **"Logs"** tab in left sidebar
2. Look for these SUCCESS indicators:
   ```
   MongoDB connected: mongodb+srv://reveal_user@...
   INFO:     Application startup complete.
   INFO:     Uvicorn running on http://0.0.0.0:8001
   ```

**If you see errors instead:**
- Take a screenshot of the error
- Reply here with the error message

---

## ‚úÖ COMPLETION CHECKLIST

Before you reply "Done", verify:

- [ ] MongoDB Atlas cluster created (M0 Free tier)
- [ ] Database user created: `reveal_user` with password
- [ ] Network access set to: `0.0.0.0/0` (allow all)
- [ ] Connection string copied and modified (includes `/app_database`)
- [ ] `MONGO_URL` added to Render environment variables
- [ ] All 5 API keys added to Render (MONGO_URL, TMDB, AUDD, OPENAI, GOOGLE_VISION)
- [ ] Render service shows: üü¢ "Live"
- [ ] Render logs show: "MongoDB connected" and "Application startup complete"

---

## üéØ What to Reply

**Once you've completed all steps, reply with:**

**"Setup complete! Here's what I see:"**

1. **Render Status**: (Live / Failed / Other)
2. **Render Logs**: (Copy the last 5-10 lines, especially any errors)
3. **MongoDB Atlas**: (Cluster created? Yes/No)
4. **Environment Variables**: (How many total? Should be 5)

**Then I'll immediately:**
- ‚úÖ Test the database connection
- ‚úÖ Load all the outfit and beauty data
- ‚úÖ Verify all API endpoints work
- ‚úÖ Test the complete app end-to-end

---

## üÜò Troubleshooting

### "I can't find the autogenerate password button"
- Type your own secure password (at least 12 characters, mix of letters/numbers/symbols)
- Save it and use it in the connection string

### "Connection string doesn't have <password>"
- Your password might already be filled in
- Just add `/app_database` after `.mongodb.net/` and before `?`

### "Render shows 'Failed' after adding MONGO_URL"
- Check the Render logs for error message
- Most common: Password has special characters that need URL encoding
- Reply with the error and I'll help fix it

### "I'm stuck on step X"
- Take a screenshot
- Reply with what you see
- I'll guide you through it

---

**Start with Step 1 and work through each step. Reply when done, and I'll take over from there!** üöÄ
